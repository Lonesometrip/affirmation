<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Affirmations App</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 8px;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            outline: none;
            color: #fff;
            background-color: #4CAF50;
            border: none;
            border-radius: 8px;
            box-shadow: 0 5px #999;
            transition: all 0.3s;
        }
        .btn:hover {
            background-color: #45a049;
            transform: translateY(2px);
            box-shadow: 0 3px #666;
        }
        .btn:active {
            background-color: #3e8e41;
            transform: translateY(4px);
            box-shadow: 0 1px #666;
        }
        .input-field {
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }
        .select-field {
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            background-color: white;
        }
        .section {
            background-color: white;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .section-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 2px solid #eaeaea;
            padding-bottom: 10px;
        }
        .tab-button {
            padding: 12px 24px;
            cursor: pointer;
            background-color: #ddd;
            border: none;
            border-radius: 8px 8px 0 0;
            font-size: 16px;
            margin-right: 5px;
        }
        .tab-button.active {
            background-color: white;
            border-bottom: 2px solid white;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background-color: white;
            border-radius: 0 0 8px 8px;
        }
        .tab-content.active {
            display: block;
        }
        .chat-container {
            border: 2px solid #dedede;
            background-color: #f1f1f1;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
        }
        .darker {
            border-color: #ccc;
            background-color: #e5e5e5;
        }
        .trade-item {
            background-color: #f9f9f9;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 5px solid #4CAF50;
        }
        .affirmation-card {
            background-color: #e8f5e9;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 5px solid #2e7d32;
        }
    </style>
</head>
<body class="p-4">
    <header class="bg-blue-600 text-white p-4 rounded-lg mb-6">
        <h1 class="text-3xl font-bold">Trading Affirmations App</h1>
        <div class="mt-4 flex flex-wrap">
            <div class="w-full md:w-1/2 p-2">
                <label for="gemini-api" class="block font-bold">Gemini API-Schlüssel:</label>
                <input type="text" id="gemini-api" class="input-field" placeholder="Geben Sie Ihren Gemini API-Schlüssel ein">
                <button onclick="saveAPIKey('gemini')" class="btn">Speichern</button>
            </div>
            <div class="w-full md:w-1/2 p-2">
                <label for="alphavantage-api" class="block font-bold">Alpha Vantage API-Schlüssel:</label>
                <input type="text" id="alphavantage-api" class="input-field" placeholder="Geben Sie Ihren Alpha Vantage API-Schlüssel ein">
                <button onclick="saveAPIKey('alphavantage')" class="btn">Speichern</button>
            </div>
        </div>
    </header>

    <nav class="mb-6">
        <div class="flex flex-wrap">
            <button onclick="showSection('sessions')" class="btn">Trading Sessions</button>
            <button onclick="showSection('intermarket')" class="btn">Intermarket Analyse</button>
            <button onclick="showSection('affirmations')" class="btn">Affirmationen</button>
            <button onclick="showSection('opportunities')" class="btn">Trading Opportunities</button>
            <button onclick="showSection('my-trades')" class="btn">Meine Trades</button>
        </div>
    </nav>

    <!-- Market Ticker -->
    <div class="section mb-6 overflow-x-auto">
        <div class="text-xl font-bold mb-2">Markt Ticker</div>
        <div class="flex space-x-4">
            <div class="px-4 py-2 bg-green-100 rounded">NASDAQ:AAPL <span class="text-green-600">+1.2%</span></div>
            <div class="px-4 py-2 bg-red-100 rounded">NASDAQ:NVDA <span class="text-red-600">-0.5%</span></div>
            <div class="px-4 py-2 bg-green-100 rounded">BINANCE:BNBUSDT <span class="text-green-600">+2.3%</span></div>
            <div class="px-4 py-2 bg-red-100 rounded">FOREX:EURUSD <span class="text-red-600">-0.1%</span></div>
            <div class="px-4 py-2 bg-green-100 rounded">PEPPERSTONE:XAUUSD <span class="text-green-600">+0.8%</span></div>
        </div>
    </div>

    <!-- Trading Sessions Section -->
    <section id="sessions" class="section">
        <h2 class="section-title">Trading Sessions</h2>
        
        <div class="mb-4">
            <button onclick="selectSession('asia')" class="tab-button" id="asia-tab">Asien</button>
            <button onclick="selectSession('europe')" class="tab-button" id="europe-tab">Europa</button>
            <button onclick="selectSession('usa')" class="tab-button" id="usa-tab">USA</button>
        </div>
        
        <div id="asia-content" class="tab-content">
            <h3 class="text-xl font-bold mb-4">Asien Session</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="border p-4 rounded">
                    <h4 class="font-bold">Session-Zeiten:</h4>
                    <p>Start: 00:00 GMT / 01:00 CET</p>
                    <p>Ende: 09:00 GMT / 10:00 CET</p>
                    <p class="mt-2 font-bold text-blue-600">Aktiv: Tokio, Sydney, Hong Kong, Shanghai</p>
                </div>
                <div class="border p-4 rounded">
                    <h4 class="font-bold">Wichtige Ereignisse heute:</h4>
                    <ul class="list-disc pl-5">
                        <li>Bank of Japan Zinsentscheidung - 02:00 GMT</li>
                        <li>China PMI Daten - 01:30 GMT</li>
                        <li>Australien Einzelhandelsumsätze - 00:30 GMT</li>
                    </ul>
                </div>
            </div>
            <div class="mt-4 border p-4 rounded">
                <h4 class="font-bold">Hauptmärkte:</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-2">
                    <div>
                        <p><strong>Nikkei 225:</strong> 36,450 <span class="text-green-600">+1.2%</span></p>
                        <p><strong>Hang Seng:</strong> 17,890 <span class="text-red-600">-0.3%</span></p>
                    </div>
                    <div>
                        <p><strong>USD/JPY:</strong> 151.25 <span class="text-green-600">+0.4%</span></p>
                        <p><strong>AUD/USD:</strong> 0.6580 <span class="text-red-600">-0.2%</span></p>
                    </div>
                    <div>
                        <p><strong>ASX 200:</strong> 7,750 <span class="text-green-600">+0.8%</span></p>
                        <p><strong>Shanghai Comp:</strong> 3,120 <span class="text-red-600">-0.5%</span></p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="europe-content" class="tab-content">
            <h3 class="text-xl font-bold mb-4">Europa Session</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="border p-4 rounded">
                    <h4 class="font-bold">Session-Zeiten:</h4>
                    <p>Start: 07:00 GMT / 08:00 CET</p>
                    <p>Ende: 16:00 GMT / 17:00 CET</p>
                    <p class="mt-2 font-bold text-blue-600">Aktiv: London, Frankfurt, Paris, Zürich</p>
                </div>
                <div class="border p-4 rounded">
                    <h4 class="font-bold">Wichtige Ereignisse heute:</h4>
                    <ul class="list-disc pl-5">
                        <li>EZB Zinsentscheidung - 12:45 GMT</li>
                        <li>UK Inflationsdaten - 09:30 GMT</li>
                        <li>Deutschland Ifo-Geschäftsklimaindex - 09:00 GMT</li>
                    </ul>
                </div>
            </div>
            <div class="mt-4 border p-4 rounded">
                <h4 class="font-bold">Hauptmärkte:</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-2">
                    <div>
                        <p><strong>DAX:</strong> 17,850 <span class="text-green-600">+0.9%</span></p>
                        <p><strong>FTSE 100:</strong> 8,120 <span class="text-green-600">+0.7%</span></p>
                    </div>
                    <div>
                        <p><strong>EUR/USD:</strong> 1.0830 <span class="text-red-600">-0.3%</span></p>
                        <p><strong>GBP/USD:</strong> 1.2680 <span class="text-red-600">-0.1%</span></p>
                    </div>
                    <div>
                        <p><strong>CAC 40:</strong> 7,590 <span class="text-green-600">+0.6%</span></p>
                        <p><strong>STOXX 600:</strong> 495 <span class="text-green-600">+0.5%</span></p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="usa-content" class="tab-content">
            <h3 class="text-xl font-bold mb-4">USA Session</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="border p-4 rounded">
                    <h4 class="font-bold">Session-Zeiten:</h4>
                    <p>Start: 13:30 GMT / 14:30 CET / 8:30 ET</p>
                    <p>Ende: 20:00 GMT / 21:00 CET / 15:00 ET</p>
                    <p class="mt-2 font-bold text-blue-600">Aktiv: New York, Chicago, Toronto</p>
                </div>
                <div class="border p-4 rounded">
                    <h4 class="font-bold">Wichtige Ereignisse heute:</h4>
                    <ul class="list-disc pl-5">
                        <li>US Arbeitsmarktbericht - 13:30 GMT</li>
                        <li>Fed Powell Rede - 17:00 GMT</li>
                        <li>US BIP Q2 (vorläufig) - 13:30 GMT</li>
                    </ul>
                </div>
            </div>
            <div class="mt-4 border p-4 rounded">
                <h4 class="font-bold">Hauptmärkte:</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-2">
                    <div>
                        <p><strong>S&P 500:</strong> 5,180 <span class="text-green-600">+0.6%</span></p>
                        <p><strong>Nasdaq:</strong> 16,780 <span class="text-green-600">+0.8%</span></p>
                    </div>
                    <div>
                        <p><strong>USD Index:</strong> 104.20 <span class="text-green-600">+0.3%</span></p>
                        <p><strong>US 10Y Yield:</strong> 4.35% <span class="text-red-600">-0.02</span></p>
                    </div>
                    <div>
                        <p><strong>Dow Jones:</strong> 38,950 <span class="text-green-600">+0.4%</span></p>
                        <p><strong>Russell 2000:</strong> 2,050 <span class="text-green-600">+1.1%</span></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Intermarket Analysis Section -->
    <section id="intermarket" class="section" style="display:none;">
        <h2 class="section-title">Murphy's Intermarket Analyse</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="border p-4 rounded">
                <h3 class="text-xl font-bold mb-3">Anleihen ↔ Aktien</h3>
                <p class="mb-2">Aktuelle Beziehung: <span class="font-bold text-blue-600">Inverse Korrelation</span></p>
                <p>US 10Y Yield: <span class="font-bold">4.35%</span> <span class="text-red-600">-0.02</span></p>
                <p>S&P 500: <span class="font-bold">5,180</span> <span class="text-green-600">+0.6%</span></p>
                <p class="mt-2">
                    <button onclick="showAnalysis('bonds-stocks')" class="btn">Detailanalyse anzeigen</button>
                </p>
            </div>
            
            <div class="border p-4 rounded">
                <h3 class="text-xl font-bold mb-3">Anleihen ↔ Rohstoffe</h3>
                <p class="mb-2">Aktuelle Beziehung: <span class="font-bold text-blue-600">Inverse Korrelation</span></p>
                <p>US 10Y Yield: <span class="font-bold">4.35%</span> <span class="text-red-600">-0.02</span></p>
                <p>Gold: <span class="font-bold">$2,375</span> <span class="text-green-600">+0.8%</span></p>
                <p class="mt-2">
                    <button onclick="showAnalysis('bonds-commodities')" class="btn">Detailanalyse anzeigen</button>
                </p>
            </div>
            
            <div class="border p-4 rounded">
                <h3 class="text-xl font-bold mb-3">Rohstoffe ↔ Dollar</h3>
                <p class="mb-2">Aktuelle Beziehung: <span class="font-bold text-blue-600">Inverse Korrelation</span></p>
                <p>USD Index: <span class="font-bold">104.20</span> <span class="text-green-600">+0.3%</span></p>
                <p>CRB Index: <span class="font-bold">325.8</span> <span class="text-red-600">-0.4%</span></p>
                <p class="mt-2">
                    <button onclick="showAnalysis('commodities-dollar')" class="btn">Detailanalyse anzeigen</button>
                </p>
            </div>
            
            <div class="border p-4 rounded">
                <h3 class="text-xl font-bold mb-3">Dollar ↔ Aktien</h3>
                <p class="mb-2">Aktuelle Beziehung: <span class="font-bold text-blue-600">Wechselnde Korrelation</span></p>
                <p>USD Index: <span class="font-bold">104.20</span> <span class="text-green-600">+0.3%</span></p>
                <p>S&P 500: <span class="font-bold">5,180</span> <span class="text-green-600">+0.6%</span></p>
                <p class="mt-2">
                    <button onclick="showAnalysis('dollar-stocks')" class="btn">Detailanalyse anzeigen</button>
                </p>
            </div>
        </div>
        
        <div class="mt-6">
            <h3 class="text-xl font-bold mb-3">Aktuelle Zyklusposition</h3>
            <div class="p-4 bg-blue-50 rounded border border-blue-200">
                <p class="font-bold text-lg mb-2">Wirtschaftszyklus-Phase: <span class="text-blue-600">Spätzyklus / Frührezession</span></p>
                <p class="mb-2">Erwartete Sektorentwicklung basierend auf Murphy's Intermarket-Analyse:</p>
                <ul class="list-disc pl-5">
                    <li>Stärke: Energie, Basiskonsumgüter, Gesundheitswesen</li>
                    <li>Schwäche: Technologie, Immobilien, Industrie</li>
                    <li>Erwartete Bewegung: Anleiherenditen ↓, USD ↓, Gold ↑</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Affirmations Section -->
    <section id="affirmations" class="section" style="display:none;">
        <h2 class="section-title">Trading Affirmationen</h2>
        
        <div class="mb-6">
            <h3 class="font-bold text-lg mb-2">Aktuellen Trading-Status wählen:</h3>
            <select id="trader-status" class="select-field" onchange="updateAffirmations()">
                <option value="">Bitte Status wählen...</option>
                <option value="preparation">Ich bereite mich auf einen Trade vor</option>
                <option value="active">Ich bin in einem aktiven Trade</option>
                <option value="strategy">Ich entwickle eine Strategie</option>
                <option value="break">Ich mache eine Pause / reflektiere</option>
            </select>
        </div>
        
        <div class="mb-6">
            <h3 class="font-bold text-lg mb-2">Affirmationstyp wählen:</h3>
            <select id="affirmation-type" class="select-field" onchange="updateAffirmations()">
                <option value="">Bitte Typ wählen...</option>
                <option value="discipline">Disziplin und Geduld entwickeln</option>
                <option value="abundance">Überflussdenken fördern</option>
                <option value="selection">Handelsauswahl verbessern</option>
                <option value="burnout">Burnout und Erschöpfung überwinden</option>
                <option value="bias">Bestätigungsfehler überwinden</option>
                <option value="paralysis">Entscheidungslähmung überwinden</option>
                <option value="fomo">FOMO überwinden</option>
                <option value="losses">Verluste schnell akzeptieren</option>
                <option value="attachment">Emotionale Bindung an Trades lösen</option>
                <option value="overtrading">Überhandel widerstehen</option>
                <option value="patience">Geduld bei langsamen Märkten bewahren</option>
            </select>
        </div>
        
        <div id="affirmations-container" class="mt-4">
            <div class="p-6 border rounded bg-gray-100 text-center">
                <p class="text-lg">Bitte wähle deinen Trading-Status und Affirmationstyp oben.</p>
            </div>
        </div>
    </section>

    <!-- Trading Opportunities Section -->
    <section id="opportunities" class="section" style="display:none;">
        <h2 class="section-title">Trading Opportunity Creation</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h3 class="font-bold text-lg mb-2">Symbol wählen:</h3>
                <select id="trading-symbol" class="select-field">
                    <option value="">Bitte Symbol wählen...</option>
                    <option value="NASDAQ:AAPL">NASDAQ:AAPL - Apple</option>
                    <option value="NASDAQ:NVDA">NASDAQ:NVDA - Nvidia</option>
                    <option value="NASDAQ:ASML">NASDAQ:ASML - ASML Holding</option>
                    <option value="BINANCE:BNBUSDT">BINANCE:BNBUSDT - Binance Coin</option>
                    <option value="CAPITALCOM:BTCUSD">CAPITALCOM:BTCUSD - Bitcoin</option>
                    <option value="PEPPERSTONE:XAUUSD">PEPPERSTONE:XAUUSD - Gold</option>
                    <option value="PEPPERSTONE:EURUSD">PEPPERSTONE:EURUSD - EUR/USD</option>
                    <option value="PEPPERSTONE:US500">PEPPERSTONE:US500 - S&P 500</option>
                </select>
                
                <h3 class="font-bold text-lg mt-4 mb-2">Zeitrahmen:</h3>
                <select id="trading-timeframe" class="select-field">
                    <option value="short">Kurzfristig (Minuten/Stunden)</option>
                    <option value="medium">Mittelfristig (Tage/Wochen)</option>
                    <option value="long">Langfristig (Wochen/Monate)</option>
                </select>
                
                <h3 class="font-bold text-lg mt-4 mb-2">Analyseanfrage:</h3>
                <textarea id="analysis-request" class="input-field" rows="3" placeholder="Spezifische Anfrage für die Analyse..."></textarea>
                
                <button onclick="generateOpportunity()" class="btn mt-4 w-full">Trading Opportunity generieren</button>
            </div>
            
            <div id="opportunity-result" class="border p-4 rounded bg-gray-50">
                <h3 class="font-bold text-lg mb-3">Generierte Trading Opportunity:</h3>
                <p class="text-gray-500">Ergebnisse werden hier angezeigt, nachdem du eine Analyse generiert hast.</p>
            </div>
        </div>
    </section>

    <!-- My Trades Section -->
    <section id="my-trades" class="section" style="display:none;">
        <h2 class="section-title">Meine Trades</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div>
                <h3 class="font-bold text-lg mb-2">Symbol:</h3>
                <select id="trade-symbol" class="select-field">
                    <option value="">Bitte Symbol wählen...</option>
                    <option value="NASDAQ:AAPL">NASDAQ:AAPL - Apple</option>
                    <option value="NASDAQ:NVDA">NASDAQ:NVDA - Nvidia</option>
                    <option value="NASDAQ:ASML">NASDAQ:ASML - ASML Holding</option>
                    <option value="BINANCE:BNBUSDT">BINANCE:BNBUSDT - Binance Coin</option>
                    <option value="CAPITALCOM:BTCUSD">CAPITALCOM:BTCUSD - Bitcoin</option>
                    <option value="PEPPERSTONE:XAUUSD">PEPPERSTONE:XAUUSD - Gold</option>
                    <option value="PEPPERSTONE:EURUSD">PEPPERSTONE:EURUSD - EUR/USD</option>
                    <option value="PEPPERSTONE:US500">PEPPERSTONE:US500 - S&P 500</option>
                </select>
            </div>
            
            <div>
                <h3 class="font-bold text-lg mb-2">Richtung:</h3>
                <select id="trade-direction" class="select-field">
                    <option value="long">Long (Kaufen)</option>
                    <option value="short">Short (Verkaufen)</option>
                </select>
            </div>
            
            <div>
                <h3 class="font-bold text-lg mb-2">Einstiegspreis:</h3>
                <input type="number" id="trade-entry" class="input-field" placeholder="Einstiegspreis">
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div>
                <h3 class="font-bold text-lg mb-2">Zielpreis:</h3>
                <input type="number" id="trade-target" class="input-field" placeholder="Zielpreis">
            </div>
            
            <div>
                <h3 class="font-bold text-lg mb-2">Stop-Loss:</h3>
                <input type="number" id="trade-stop" class="input-field" placeholder="Stop-Loss-Preis">
            </div>
            
            <div>
                <h3 class="font-bold text-lg mb-2">Notizen:</h3>
                <input type="text" id="trade-notes" class="input-field" placeholder="Trade-Notizen">
            </div>
        </div>
        
        <div class="text-center mb-6">
            <button onclick="addTrade()" class="btn px-8">Trade hinzufügen</button>
        </div>
        
        <h3 class="text-xl font-bold mb-4">Aktuelle Trades:</h3>
        <div id="trades-container">
            <p class="text-gray-500 text-center">Keine aktiven Trades. Füge oben einen neuen Trade hinzu.</p>
        </div>
    </section>

    <!-- Chat Pop-up -->
    <div id="chat-popup" class="fixed bottom-0 right-0 m-4 p-4 bg-white rounded-lg shadow-lg border" style="width: 300px;">
        <div class="flex justify-between items-center mb-4">
            <h3 class="font-bold">Gemini Chat-Assistent</h3>
            <button onclick="toggleChat()" class="text-gray-500 hover:text-gray-700">
                <span id="chat-toggle-icon">-</span>
            </button>
        </div>
        
        <div id="chat-content">
            <div id="chat-messages" class="h-64 overflow-y-auto mb-4 p-2 border rounded">
                <div class="chat-container">
                    <p><strong>Gemini:</strong> Hallo! Wie kann ich dir heute bei deinem Trading helfen?</p>
                </div>
            </div>
            
            <div class="flex">
                <input type="text" id="chat-input" class="input-field flex-grow mr-2" placeholder="Deine Nachricht...">
                <button onclick="sendChatMessage()" class="btn px-4 py-2">Senden</button>
            </div>
        </div>
    </div>

    <script>
        // Basic functions for showing/hiding sections
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected section
            document.getElementById(sectionId).style.display = 'block';
        }
        
        // Initialize - show first section
        window.onload = function() {
            showSection('sessions');
            selectSession('asia');
        };
        
        // Session tabs
        function selectSession(session) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(session + '-content').classList.add('active');
            
            // Add active class to selected tab
            document.getElementById(session + '-tab').classList.add('active');
        }
        
        // API key storage
        function saveAPIKey(type) {
            const keyInput = document.getElementById(type + '-api');
            if (keyInput.value.trim() === '') {
                alert('Bitte geben Sie einen API-Schlüssel ein.');
                return;
            }
            
            // In a real app, we would securely store this
            localStorage.setItem(type + 'ApiKey', keyInput.value);
            alert(type.charAt(0).toUpperCase() + type.slice(1) + ' API-Schlüssel gespeichert!');
        }
        
        // Intermarket analysis
        function showAnalysis(relation) {
            alert('Detaillierte Analyse für ' + relation + ' wird geladen...');
            // In a real app, this would show detailed charts and data
        }
        
        // Affirmations system
        function updateAffirmations() {
            const status = document.getElementById('trader-status').value;
            const type = document.getElementById('affirmation-type').value;
            
            if (!status || !type) {
                return;
            }
            
            const container = document.getElementById('affirmations-container');
            container.innerHTML = '';
            
            // Sample affirmations
            let affirmations = [];
            
            if (type === 'discipline') {
                affirmations = [
                    "Ich bin ein disziplinierter und geduldiger Trader, der seinem Handelsplan mit unerschütterlichem Engagement folgt.",
                    "Ich vertraue auf die Wirksamkeit meiner Strategien und warte geduldig auf Setups mit hoher Wahrscheinlichkeit.",
                    "Ich besitze die Selbstkontrolle, um an meinen etablierten Regeln festzuhalten und impulsive Handlungen zu vermeiden."
                ];
            } else if (type === 'abundance') {
                affirmations = [
                    "Ich ziehe reichlich Handelsmöglichkeiten an, die mit meiner Strategie übereinstimmen und zu profitablen Ergebnissen führen.",
                    "Ich bin ein geschickter Trader, der in der Lage ist, die Fülle von Chancen im Markt zu nutzen.",
                    "Jeder Trade, den ich eingehe, ist eine Gelegenheit für finanziellen Wohlstand und Wachstum."
                ];
            } else if (type === 'selection') {
                affirmations = [
                    "Ich bin ein disziplinierter Trader, der Trades basierend auf sorgfältiger Analyse und vordefinierten Kriterien auswählt.",
                    "Ich vertraue meiner Fähigkeit, Märkte mit hoher Volatilität zu identifizieren, die gewinnbringende Trading-Möglichkeiten bieten.",
                    "Ich stütze mich auf technische Indikatoren, um meine Handelsauswahl zu lenken, und wähle diejenigen, die mit meiner Strategie übereinstimmen."
                ];
            }
            // More affirmation types would be added here
            
            // Display affirmations
            affirmations.forEach(text => {
                const card = document.createElement('div');
                card.className = 'affirmation-card mb-4';
                card.innerHTML = `<p class="text-lg">${text}</p>`;
                container.appendChild(card);
            });
        }
        
        // Trading opportunities
        function generateOpportunity() {
            const symbol = document.getElementById('trading-symbol').value;
            if (!symbol) {
                alert('Bitte wähle ein Symbol aus.');
                return;
            }
            
            const timeframe = document.getElementById('trading-timeframe').value;
            const request = document.getElementById('analysis-request').value;
            
            // In a real app, this would call Gemini API
            const resultContainer = document.getElementById('opportunity-result');
            resultContainer.innerHTML = `
                <h3 class="font-bold text-lg mb-3">Trading Opportunity: ${symbol}</h3>
                <div class="mb-3 p-3 bg-blue-50 rounded">
                    <p class="font-bold">Empfehlung: <span class="text-green-600">KAUFEN</span></p>
                    <p class="font-bold mt-2">Zeitrahmen: ${timeframe === 'short' ? 'Kurzfristig' : timeframe === 'medium' ? 'Mittelfristig' : 'Langfristig'}</p>
                </div>
                
                <h4 class="font-bold mt-4">Technische Analyse:</h4>
                <p>Der Preis hat einen starken Aufwärtstrend gebildet und gerade eine wichtige Widerstandslinie durchbrochen. Der RSI zeigt 65, was auf Stärke hindeutet, ohne überkauft zu sein.</p>
                
                <h4 class="font-bold mt-4">Einstiegspunkte:</h4>
                <p>Aktueller Preis: $182.30</p>
                <p>Empfohlener Einstieg: $180-$185</p>
                
                <h4 class="font-bold mt-4">Stop-Loss und Ziele:</h4>
                <p>Stop-Loss: $172.50 (unter dem letzten Swing Low)</p>
                <p>Ziel 1: $195.00</p>
                <p>Ziel 2: $205.00</p>
                
                <button onclick="addOpportunityToTrades('${symbol}')" class="btn mt-4">Zu meinen Trades hinzufügen</button>
            `;
        }
        
        // Add opportunity to trades
        function addOpportunityToTrades(symbol) {
            // In a real app, this would pre-fill the trade form
            document.getElementById('trade-symbol').value = symbol;
            document.getElementById('trade-direction').value = 'long';
            document.getElementById('trade-entry').value = '182.30';
            document.getElementById('trade-target').value = '195.00';
            document.getElementById('trade-stop').value = '172.50';
            document.getElementById('trade-notes').value = 'Automatisch aus Opportunity hinzugefügt';
            
            showSection('my-trades');
        }
        
        // Trade management
        let trades = [];
        
        function addTrade() {
            const symbol = document.getElementById('trade-symbol').value;
            if (!symbol) {
                alert('Bitte wähle ein Symbol aus.');
                return;
            }
            
            const direction = document.getElementById('trade-direction').value;
            const entry = document.getElementById('trade-entry').value;
            const target = document.getElementById('trade-target').value;
            const stop = document.getElementById('trade-stop').value;
            const notes = document.getElementById('trade-notes').value;
            
            if (!entry) {
                alert('Bitte gib einen Einstiegspreis ein.');
                return;
            }
            
            const tradeId = Date.now(); // Use timestamp as ID
            
            const trade = {
                id: tradeId,
                symbol,
                direction,
                entry,
                target,
                stop,
                notes,
                date: new Date().toLocaleString()
            };
            
            trades.push(trade);
            updateTradesDisplay();
            
            // Reset form
            document.getElementById('trade-entry').value = '';
            document.getElementById('trade-target').value = '';
            document.getElementById('trade-stop').value = '';
            document.getElementById('trade-notes').value = '';
        }
        
        function removeTrade(id) {
            trades = trades.filter(trade => trade.id !== id);
            updateTradesDisplay();
        }
        
        function updateTradesDisplay() {
            const container = document.getElementById('trades-container');
            
            if (trades.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center">Keine aktiven Trades. Füge oben einen neuen Trade hinzu.</p>';
                return;
            }
            
            container.innerHTML = '';
            
            trades.forEach(trade => {
                const tradeCard = document.createElement('div');
                tradeCard.className = 'trade-item mb-4';
                
                // Calculate risk/reward
                const riskPerUnit = Math.abs(parseFloat(trade.entry) - parseFloat(trade.stop));
                const rewardPerUnit = Math.abs(parseFloat(trade.target) - parseFloat(trade.entry));
                const riskReward = (rewardPerUnit / riskPerUnit).toFixed(2);
                
                tradeCard.innerHTML = `
                    <div class="flex justify-between items-start">
                        <h3 class="font-bold text-lg">${trade.symbol}</h3>
                        <div>
                            <span class="px-3 py-1 rounded ${trade.direction === 'long' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                ${trade.direction === 'long' ? 'LONG' : 'SHORT'}
                            </span>
                            <button onclick="removeTrade(${trade.id})" class="ml-2 px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600">
                                Entfernen
                            </button>
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-500 mb-2">Eröffnet: ${trade.date}</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mt-3">
                        <p><strong>Einstieg:</strong> ${trade.entry}</p>
                        <p><strong>Ziel:</strong> ${trade.target}</p>
                        <p><strong>Stop:</strong> ${trade.stop}</p>
                    </div>
                    
                    <p class="mt-2"><strong>Risk/Reward:</strong> 1:${riskReward}</p>
                    
                    ${trade.notes ? `<p class="mt-2"><strong>Notizen:</strong> ${trade.notes}</p>` : ''}
                `;
                
                container.appendChild(tradeCard);
            });
        }
        
        // Chat functionality
        let chatMinimized = false;
        
        function toggleChat() {
            chatMinimized = !chatMinimized;
            
            const content = document.getElementById('chat-content');
            const icon = document.getElementById('chat-toggle-icon');
            
            if (chatMinimized) {
                content.style.display = 'none';
                icon.textContent = '+';
            } else {
                content.style.display = 'block';
                icon.textContent = '-';
            }
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            const chatMessages = document.getElementById('chat-messages');
            
            // Add user message
            const userDiv = document.createElement('div');
            userDiv.className = 'chat-container darker';
            userDiv.innerHTML = `<p><strong>Du:</strong> ${message}</p>`;
            chatMessages.appendChild(userDiv);
            
            // Clear input
            input.value = '';
            
            // Simulate response (in a real app, this would call Gemini API)
            setTimeout(() => {
                const responseDiv = document.createElement('div');
                responseDiv.className = 'chat-container';
                
                let response = "Ich analysiere deine Anfrage...";
                
                if (message.toLowerCase().includes('markt')) {
                    response = "Die Märkte zeigen heute gemischte Signale. US-Aktien sind leicht im Plus, während europäische Märkte eine seitwärts gerichtete Bewegung zeigen. Gold ist aufgrund von Inflationssorgen gestiegen.";
                } else if (message.toLowerCase().includes('affirmation')) {
                    response = "Eine gute Affirmation für heute könnte sein: 'Ich treffe Handelsentscheidungen basierend auf meiner Strategie und nicht auf Emotionen. Ich bin geduldig und warte auf die besten Gelegenheiten.'";
                } else if (message.toLowerCase().includes('strategie')) {
                    response = "Eine bewährte Strategie für volatile Märkte ist es, die Positionsgröße zu reduzieren und enger gesteckte Stop-Losses zu verwenden. Erwäge auch, auf höhere Timeframes zu wechseln, um Rauschen zu reduzieren.";
                } else {
                    response = "Ich stehe dir gerne zur Verfügung. Du kannst mich zu Marktanalysen, Trading-Strategien, Affirmationen oder anderen Trading-bezogenen Themen befragen.";
                }
                
                responseDiv.innerHTML = `<p><strong>Gemini:</strong> ${response}</p>`;
                chatMessages.appendChild(responseDiv);
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1000);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Allow sending message with Enter key
        document.getElementById('chat-input').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        });
    </script>
</body>
</html>
